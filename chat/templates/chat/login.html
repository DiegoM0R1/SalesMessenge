<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Clientes</title>
    {% load static %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <style>
        :root {
            --primary-color: #0c345c;
            --secondary-color: #fff957;
            --accent-color: #ffdf0e;
            --light-color: #00142a;
            --dark-color: #001833;
        }

        body {
            font-family: 'Roboto', sans-serif;
            overflow-x: hidden;
    background-color: #001b37;
            color: white;
            position: relative;
            min-height: 100vh;
        }




        .frase {
            color: white;
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-top: 2rem;
            margin-bottom: 0;
            animation: fadeInDown 1s ease-in-out;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .eslogan {
            color: white;
            font-size: 1.5rem;
            font-weight: 500;
            text-align: center;
            font-style: italic;
            margin-bottom: 2rem;
            animation: fadeInUp 1.2s ease-in-out;
    

        }

        .container {
            padding: 2rem;
            position: relative;
            z-index: 10;
        }

        .left-content {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            animation: fadeInLeft 1.5s ease-in-out;
        }

        .logo {
            width: 100%;
            height: 200px;
            background-image: url("{% static 'imagenes/logo_empresa.png' %}");
            background-position: left;
            background-repeat: no-repeat;
            background-size: contain;
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .container-custom {
            background-color: #000000;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin: 0 auto;
            animation: fadeInRight 1.5s ease-in-out;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
             color: white;
        }

        .container-custom:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .container-custom::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary-color), var(--accent-color));
            animation: pulse 2s infinite;
        }

        #iniciar_sesion {
    color: white;
           
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-align: center;
            font-size: 1.8rem;
            position: relative;
        }

        #iniciar_sesion::after {
            content: '';
            display: block;
            width: 50px;
            height: 3px;
            background-color: var(--accent-color);
            margin: 0.5rem auto;
            border-radius: 10px;
        }

        .email, .contraseña {
            width: 100%;
            padding: 0.75rem 1rem;
            margin-bottom: 1.5rem;
    border: 1px solid #333;
            
            border-radius: 5px;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-sizing: border-box;
    color: black;

        }

        .email:focus, .contraseña:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.25);
            outline: none;
        }

       .boton_sesion {
            width: 100%;
            padding: 0.75rem;
            background-color: #fff200;

            color: black;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            letter-spacing: 1px;
        }

        .boton_sesion:hover {
            background-color: #e6e102;

            box-shadow: 0 5px 15px rgba(0, 77, 153, 0.3);
            transform: translateY(-2px);
        }

        .boton_sesion::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.6s ease;
        }

        .boton_sesion:hover::before {
            left: 100%;
        }

        .triangulo1, .triangulo2 {
            position: fixed;
            z-index: 1;
        }

        /* Reemplaza los estilos actuales de los triángulos con estos */
.triangulo1 {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 20vh;
    background-color: #e6e102;
    clip-path: polygon(0 100%, 100% 100%, 0 0);
    z-index: -1;
}

.triangulo2 {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 10vh;
    background-color: #fff200;
    clip-path: polygon(0 100%, 100% 100%, 100% 0);
    z-index: -1;
}

/* Aseguramos que sean responsivos */
@media (max-width: 768px) {
    .triangulo1 {
        height: 15vh;
    }
    .triangulo2 {
        height: 8vh;
    }
}

        .alert-danger {
            background-color: #fff5f5;
            color: #e53e3e;
            border-left: 4px solid #e53e3e;
            padding: 1rem;
            border-radius: 5px;
            margin-top: 1rem;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes pulse {
            0% {
                opacity: 0.6;
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0.6;
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-100%);
            }
            to {
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
            }
            to {
                transform: translateX(0);
            }
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .frase {
                font-size: 1.8rem;
                padding: 0 1rem;
            }
            
            .eslogan {
                font-size: 1.2rem;
            }
            
            .container-custom {
                max-width: 90%;
            }
            
            .left-content {
                margin-bottom: 2rem;
            }
            
            .triangulo1, .triangulo2 {
                border-width: 0 0 50vw 50vw;
            }
        }

        @media (max-width: 576px) {
            .frase {
                font-size: 1.5rem;
            }
            
            .eslogan {
                font-size: 1rem;
            }
            
            .container {
                padding: 1rem;
            }
            
            #iniciar_sesion {
                font-size: 1.5rem;
            }
        }

        /* Estilos para los modales */
.modal-content {
    border: none;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

.modal-header {
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
    padding: 1rem 1.5rem;
}

.modal-body {
    padding: 2rem;
}

.bi-check-circle, .bi-x-circle {
    display: block;
    margin: 0 auto 1rem auto;
}

.modal .btn-secondary {
    background-color: #6c757d;
    border-color: #6c757d;
}

.modal .btn-secondary:hover {
    background-color: #5a6268;
    border-color: #545b62;
}
    </style>
</head>
<body>
    <h1 class="frase animate__animated animate__fadeInDown">¡Expertos en servicios contables y tributarios!</h1>
    <p class="eslogan animate__animated animate__fadeInUp">¡TU ÉXITO ES NUESTRA MISIÓN!</p>

    <div class="container">
        <div class="row">
            <div class="col-md-6 left-content text-center animate__animated animate__fadeInLeft">
                <div class="logo"></div>
            </div>
            <div class="col-md-4 container-custom">
    <h2 id="iniciar_sesion">Iniciar Sesión</h2>
    <form method="post">
        {% csrf_token %}
        <div class="input-group">
            <input type="text" class="email" placeholder="Email" name="nombre_usuario" value="" autocomplete="off" required>
        </div>
        <div class="input-group">
            <input type="password" class="contraseña" placeholder="Contraseña" name="contrasena" value="" required>
        </div>
        <div id="validation-error" class="alert alert-danger" style="display:none; margin-top: 1rem;"></div>
        <button type="submit" class="boton_sesion">INICIAR SESIÓN</button>
    </form>
    {% if error %}
    <div class="alert alert-danger animate__animated animate__shakeX" role="alert" style="margin-top: 1rem;"> <strong>Error:</strong> {{ error }}
    </div>
    {% endif %}
</div>
        </div>
    </div>
    <div class="triangulo2"></div>
    <div class="triangulo1"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        // Segundo bloque DOMContentLoaded modificado
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form');
    const emailInput = document.querySelector('.email');
    const passwordInput = document.querySelector('.contraseña');

    // No necesitas el elemento 'validation-error' si Django maneja los errores.
    // Si quieres mantenerlo para errores de campos vacíos antes de enviar:
    // Añade este div en tu HTML, por ejemplo, antes del botón de submit:
    // <div id="validation-error" class="alert alert-warning" style="display:none;">Por favor, complete todos los campos.</div>
    const validationErrorDiv = document.getElementById('validation-error'); // Asegúrate que este ID exista en tu HTML

    form.addEventListener('submit', function(event) {
        const email = emailInput.value.trim();
        const password = passwordInput.value.trim();

        let isValid = true;

        if (email === '') {
            emailInput.classList.add('is-invalid');
            isValid = false;
        } else {
            emailInput.classList.remove('is-invalid');
        }

        if (password === '') {
            passwordInput.classList.add('is-invalid');
            isValid = false;
        } else {
            passwordInput.classList.remove('is-invalid');
        }

        if (!isValid) {
            event.preventDefault(); // Detiene el envío del formulario
            if (validationErrorDiv) {
                validationErrorDiv.textContent = 'Por favor, complete todos los campos.';
                validationErrorDiv.style.display = 'block';
                setTimeout(function() {
                    validationErrorDiv.style.display = 'none';
                }, 3000);
            }
            // Podrías también mostrar un modal de Bootstrap aquí para campos vacíos
            // en lugar del div 'validation-error'
        }
        // Si isValid es true, el formulario se enviará normalmente a Django.
        // Django procesará el login y si hay un error, lo mostrará
        // a través de la variable de contexto `{{ error }}`.
    });

    // Remover clase is-invalid al escribir
    emailInput.addEventListener('input', function() {
        this.classList.remove('is-invalid');
        if (validationErrorDiv) validationErrorDiv.style.display = 'none';
    });

    passwordInput.addEventListener('input', function() {
        this.classList.remove('is-invalid');
        if (validationErrorDiv) validationErrorDiv.style.display = 'none';
    });

    // Puedes quitar los modales de éxito/error de JavaScript
    // ya que Django se encargará de la lógica de redirección o mostrar errores.
    // Si quieres mostrar un modal de éxito/error DESPUÉS de la respuesta de Django,
    // necesitarías usar AJAX para enviar el formulario, lo cual es más complejo.
});
    </script>
    <!-- Modal de Éxito -->
<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title" id="successModalLabel">¡Acceso Exitoso!</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="text-center mb-4">
          <i class="bi bi-check-circle" style="font-size: 3rem; color: #28a745;"></i>
        </div>
        <p class="text-center">Credenciales correctas. Iniciando sesión...</p>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Error -->
<div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="errorModalLabel">Error de Acceso</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="text-center mb-4">
          <i class="bi bi-x-circle" style="font-size: 3rem; color: #dc3545;"></i>
        </div>
        <p class="text-center">Usuario o contraseña incorrectos. Por favor, intente nuevamente.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
</body>
</html>